### 52\. Разница между средой для разработки и средой для продакшна

Вы можете определять разные настройки для среды разработки и продакшн-среды. 

По умолчанию Node.js запускает среду для разработки. Вы можете изменить это поведение с помощью переменной среды NODE\_ENV, присвоив ей значение production: NODE\_ENV=production. 

Обычно, это делается с помощью запуска команды 
`
export NODE_ENV=production 
`

в терминале, но лучше сохранить настройки терминала в файле конфигурации (например, .bash\_profile, если вы работаете с Bash), в противном случае, настройки будут сброшены при перезагрузке системы. 

Также переменные среды можно определить перед запуском приложения: 
`
NODE_ENV=production node app.js 
`

Эта переменная среды широко используется в сторонних библиотеках. 

Режим production, как правило, означает следующее: 

* минимальное логгирование, в лог выводится только самое необходимое
* для оптимизации производительности используется больше уровней кэширования

Например, Pug, библиотека шаблонов, используемая Express, компилируется в режиме отладки, если NODE\_ENV не присвоено значение production. Представления в Express в режиме разработки компилируются при каждом запросе, в то время как в режиме продакшна они кэшируются. Существует много других примеров. 

Вы можете использовать условные операторы для выполнения кода в разных режимах: 
`
if (process.env.NODE_ENV === 'development') {
    // ... 
}
if (process.env.NODE_ENV === 'production') {
    // ... 
}
`

В Express-приложении, например, вы можете использовать такой подход для определения разного уровня обработки ошибок: 
`
if (process.env.NODE_ENV === "development") {
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true }))
})
    
if (process.env.NODE_ENV === "production") {
    app.use(express.errorHandler())
})
`