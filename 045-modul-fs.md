### 45\. Модуль fs

Модуль fs предоставляет множество полезных методов для доступа и взаимодействия с файловой системой. 

Его не нужно устанавливать. Будучи частью ядра Node.js, он может использоваться по требованию:
`
const fs = require('fs')
`

Среди методов модуля fs можно назвать следующее:

* fs.access() - определяет наличие файла и его доступность для Node.js
* fs.appendFile() - добавляет данные в файл. Файл создается при отсутствии
* fs.chmod() - изменяет разрешения переданного файла. Похожие методы: fs.lchmod(), fs.fchmod()
* fs.chown() - изменяет владельца и группу переданного файла. Похожие методы: fs.fchown(), fs.lchown()
* fs.close() - закрывает файловый дескриптор
* fs.copyFile() - копирует файл
* fs.createReadStream() - создает поток для чтения файла
* fs.createWriteStream() - создает поток для записи файла
* fs.link() - создает новую жесткую ссылку на файл
* fs.mkdir() - создает новую директорию
* fs.mkdtemp() - создает временную директорию
* fs.open() - устанавливает режим файла
* fs.readdir() - читает содержимое директории
* fs.readFile() - читает содержимое файла. Похохий метод: fs.read()
* fs.readlink() - читает значение символической ссылки
* fs.realpath() - преобразует точки относительного пути (. , ..) в полный путь
* fs.rename() - переименовывает файл или папку
* fs.rmdir() - удаляет директорию
* fs.stat() - возвращает статистику переданного файла. Похожие методы: fs.fstat(), fs.lstat()
* fs.symlink() - создает новую символическую ссылку на файл
* fs.truncate() - уменьшает переданный файл до заданного размера (длины). Похожий метод: fs.ftruncate()
* fs.unlink() - удаляет файл или символическую ссылку
* fs.unwatchFile() - прекращает слежение за изменениями файла
* fs.utimes() - изменяет время создания переданного файла. Похожий метод: fs.futimes()
* fs.watchFile() - следит за изменениями файла. Похожий метод: fs.watch()
* fs.writeFile() - записывает данные в файл. Похожий метод: fs.write()

Названные методы являются асинхронными по умолчанию и имеют синхронные аналоги (Sync). 

Например: 

* fs.rename()
* fs.renameSync()
* fs.write()
* fs.writeSync()

Это имеет решающее значение для работы приложения. 

В Node.js 10 появилась экспериментальная поддержка промисов. 

Рассмотрим метод fs.rename(). Асинхронная версия используется с колбеком:
    
    const fs = require('fs')

    fs.rename('before.json', 'after.json', err => {
        if (err) {
            return console.error(err)
        }
        // готово
    })

Синхронная версия, как правило, используется с блоком try/catch для обработки ошибок:

    const fs = require('fs')

    try {
        fs.renameSync('before.json', 'after.json')
        // готово 
    } catch (err) {
        console.error(err)
    }

Принципиальным отличием является то, что второй код блокирует поток на время выполнения операции.

