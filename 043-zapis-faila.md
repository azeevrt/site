### 43\. Запись файла

Простейшим способом записи данных в файл является использование метода fs.writeFile(). 

Например:

    const fs = require('fs')

    const content = 'Some content!'

    fs.writeFile('/Users/joe/test.txt', content, err => {
        if (err) {
            console.error(err)
            return
        }
        // файл записан успешно
    })

В качестве альтерантивы можно использовать метод fs.writeFileSync():

    const fs = require('fs')

    const content = 'Some content!'

    try {
        const data = fs.writeFileSync('/Users/joe/test.txt', content)
        // файл успешно записан 
    } catch (err) {
        console.error(err)
    }

По умолчанию данные методы перезаписывают существующий файл. 

Стандартное поведение можно изменить с помощью соответствующего флага: 
`
fs.writeFile('/Users/joe/test.txt', content, { flag: 'a+' }, err => { })
`

Другие флаги:

* r+ - открыть файл для чтения и записи
* w+ - открыть файл для чтения и записи, поместив курсор в начало файла. Файл создается при отсутствии
* a - открыть файл для записи, поместив курсор в конец файла. Файл создается при отсутствии
* a+ - открыть файл для чтения и записи, поместив курсор в конец файла. Файл создается при отсутствии

Подробнее о флагах можно почитать [здесь][anchor0]. 

##### Дополнение файла

Удобным методом для добавлени контента в конец файла является fs.appendFile() (и его синхронная версия fs.appendFileSync()):

    const content = 'Some content!'

    fs.appendFile('file.log', content, err => {
        if (err) {
            console.error(err)
            return
        }
        // выполнено! 
    })

##### Использование потоков

Все эти методы записывают весь файл перед тем, как вернуть управление программе (в асинхронных версиях это означает выполнение колбека). 

Поэтому для записи больших файлов используются потоки. 

[anchor0]: https://nodejs.org/api/fs.html#fs_file_system_flags

